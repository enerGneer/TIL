# 운영체제

## 기억장치

- 제일 빠른 순서대로
  1. 레지스터
  2. 캐시 메모리
  3. 주기억장치
     - ROM 읽기전용
     - RAM 휘발성 일반적 주기억장치
  4. 보조기억장치

## 시스템 소프트웨어

로더

링커

유틸리티

번역기(컴파일러,어셈블러)

장치 드라이버

운영체제 (대표적!)

### 구성

- 제어 프로그램
  - 감시
  - 작업관리
  - 데이터 관리
- 처리 프로그램

## 운영체제

### 기능

- 관리
  - 프로세스
  - 메모리
  - 파일
  - 입출력
  - 보조기억장치
  - 네트워킹
  - 정보 보안
- 명령 해석

### 성능 평가 기준

처리량

반환시간

신뢰도 : 결과

사용가능도 : 가용성

### 종류

다중 사용자, 다중 작업 지원

트리 구조 파일 시스템

- 윈도우
  - 선점형 멀티태스킹
  - GUI
  - Plug and Play
  - OLE
- 리눅스
  - 이식성 유연성 확장성
- 유닉스
  - 구성
    - 커널
      - 핵심기능
    - 쉘
      - 명령어 해석기
      - 종류 다양
  - 파일 시스템
    - 부트블록 : 부팅 시
    - 슈퍼블록 : 전체
    - I-node 블록 : 데이터블록 참조. 파일 디렉터리에 대한 정보
    - 데이터 블록 : 실제 파일 데이터
  - 파일 디스크립터
    - 파일 관리
    - 사용자가 직접 참조 불가
  - 권한
    - RWX-
    - umask 접근 권한 마스크
      - 초기 파일의 권한은 666, 디렉터리 권한은 777

## 메모리 관리

### 전략

반입 Fetch

배치 Placement

교체 Replacement

### 주기억장치 할당 기법

- 단일 분할 할당 기법
  - 단순. 초기. 지금은 사용하지 않는다. 한순간에 한 사용자만 사용가능
  - 주기억장치 < 프로그램
    - 오버레이 기법 : 잘라서 순차처리
    - 스와핑 기법 : 돌아가면서
- 다중 분할 할당 기법
  - 고정 분할 할당 기법
  - 가변 분할 할당 기법

### 단편화

- 종류
  - 내부 단편화
  - 외부 단편화
- 해결 방법
  - 통합 기법
  - 압축 기법
  - 재배치 기법

## 가상기억장치

### 가상기억장치란

- 보조기억장치(하드디스크)의 일부를 주기억장치처럼 사용하는 것
- 주기억장치 < 프로그램 크기
- 프로그램을 작은 블록 단위 여러개로 나누어서 가상기억장치에 보관해놓고 프로그램실행 시 요구되는 블록만 주기억장치에 불연속적으로 할당

### 블록 분할 방법

- 페이징 기법
  - 고정 크기
  - 가상 메모리 나눈 단위 : 페이지
  - 물리 메모리 나눈 블록 : 프레임
  - 페이지 맵 테이블
  - 외부 단편화 X 내부단편화 O
- 세그먼테이션
  - 가변 크기
  - 세그먼트 테이블
  - 내부단편화 X 외부단편화O

### 페이지 교체 알고리즘

- FIFO 먼저 들어온것 먼저 교체
- OPT optimal replacement 최적 교체
  - 앞으로 가장 안 될 페이지 예상. 이상적이고 이론적
- LRU Least Recently Used
  - 최근 가장 오랫동안 사용되지 않은 페이지를 교체
- LFU Least Frequently Used
  - 빈도 가장 적은 페이지를 교체
- SCR Second Chance Replacement
  - FIFO 단점 보완

### 페이지 부재

- 이로 인해 발생하는 **스레싱 현상**
  - 페이지 교체 시간 > 프로세스 처리 시간
  - 방지 방법 : 워킹 셋
    - 워킹 셋 : 프로세스가 일정 시간 동안 자주 참조하는 페이지들 집합
      - 구역성 : 워킹 셋 이론의 기반. 일부 페이지만 집중적으로 참조하는 현상
        - 시간 구역성 : 루프 스택, 서브루틴
        - 공간 구역성 : 배열순회, 순차적 코드 실행

## 프로세스

실행중인 프로그램

### 메모리 상의 프로세스 영역 4가지

코드 영역 : 코드가 저장

데이터 영역 : 전역 변수 정적 변수

스택 영역 : 지역 변수와 함수의 매개 변수가 저장된다

힙 영역 : 동적 할당 (프로그래머가 할당)

### 프로세스 상태 전이

생성 → 준비ready —Dispatch→ 실행Run→종료

I/O처리 필요해서 실행 중단시키면 Wait대기상태로 감—Wake Up→준비→실행

준비 : 대기큐에서 프로세서 할당 기다리는 상태

Spooling : I/O 데이터를 직접 입출력장치에 보내지 않고 모아뒀다가 한꺼번에 보내려고 저장해놓는 것

### 스레드Thread

- 프로그램은 하나 이상의 프로세스를 가진다
  - 하나의 프로세스는 반드시 하나 이상의 스레드를 갖는다
- 경량 프로세스라고도 한다
- 스택 영역만 별도로 할당받고 부모 프로세스의 코드, 데이터, 힙영역은 공유한다.
- 분류
  - 사용자 수준의 스레드
    - 사용자가 만든. 속도는 빠름. 구현은 어렵다
  - 커널 수준의 스레드
    - 운영체제의 커널에 의해 운용. 구현 쉬움. 속도 느리다.

### 문맥 교환 Context Switching

- 하나의 프로세스가 CPU사용중인 상태
  - 다르 프로세스가 CPU 사용하도록 하기 위해 이전의프로세스 상태를 PCB에 보관
    - 또 다르 프로세스의 정보를 PCB에서 얻어 레지스터에 적재하는 과정

### PCB process control block 프로세스 제어 블록

운영체제가 프로세스에 대한 정보를 저장해 놓는 공간

- PCB에 저장되는 정보
  - 프로세스 현재 상태
  - 포인터
  - 고유 식별자
  - 스케줄링, 프로세스 우선순위
  - CPU 레지스터 정보
  - 주기억장치 관리 정보
  - IO 상태정보
  - 계정정보 (CPU사용시간, 실제사용시간, 한정된시간)
