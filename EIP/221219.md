# Section 3. 인터페이스 상세 설계

# 1. 내외부 송수신

## 연계방식

1. 직접 연계방식
2. 간접 연계방식

### 1. 직접 연계방식

중간 매개체 없이 송수신 시스템이 직접 인터페이스 하는 방식

- 속도 빠르다
- 구현 단순
- 개발 비용, 기간이 짧다
- 결합도 높다
  - 시스템 변경에 민감하다
- 각각의 상대에 맞는 암호화 체계를 만들어야 한다.
  - 통합 환경 구축 어렵다

### 2. 간접 연계방식

중간에 연계 서버를 두는 방식 (중계시스템, 어댑터)

- EAI(기업 어플리케이션 통합)서버와 같은 연계서버를 활용하는 방식
- 중계시스템이 알아서 타 시스템과의 암호화를 처리해준다
  - 다양한 환경 갖는 시스템들과 연계, 통합 관리 가능
  - 인터페이스 변경에 유연한 대처 가능 (연계시스템에만 맞추면 되니까!)
    - 개발하기엔 조금 복잡하다
      - 좀 더 정형화된 데이터가 필요하기 때문에
      - 개발 비용, 기간이 길다

## 연계 기술

어떻게 각각의 시스템을 연결할 것인가

### 1. DB Link

DB를 연결할 수 있는 객체를 뚫어주는 것

### 2. DB Connection

위의 객체보다 큰 단위의 DB를 다 뚫어주는 것

DB Connection Pool : A에서 B의 DB에 연결할 때, DB에 연결할 수 있는 여러 일꾼들. 일꾼이 왔다갔다하며 B의 DB를 가져오게 된다. DB 커넥션들이 묶여있는 Pool, 공간.

DB를 연결한다!

### 3. JDBC/ODBC

데이터베이스를 연결할 수 있는 편리한 기술

- JDBC : JAVA에서 DB를 조금 더 쉽게 연결하게 해준다
- ODBC : 윈도우에서 여러가지 커넥션 처리할 때 사용한다.
- 필요한 이유
  - DB에서 데이터 가져오려면 접속을 해야 한다.
  - BUT! DB 별로 연결하는 기술이 다 다르다.
    - 이 연결을 도와주는 수단이 ODBC, JDBC

### 4. API / OpenAPI

API : 만들어진 문서가 있다. 내가 입력한 입력값에 해당하는 결과값을 돌려줘!

OpenAPI : 공공에서 뚫어놓는 것

송신 시스템의 애플리케이션 프로그래밍 인터페이스 프로그램

이걸 REST라고 보면 된다

- 필요한 것
  - API명
  - 입출력 파라미터 정보 (뒤에 있는 파라미터!)

### 5. Web Service

- WSDL (Web Services Description Language)
  - xml로 만들어진 설명서
  - 내가 어떤 입력값을 줘야 어떤 출력값이 나오는지 정의한 것
- UDDI (Universal Description, Discovery and Integration)
  - 도서관 같은 것
  - 여러개의 WSDL을 가지고 있는 저장소 역할
- SOAP (Simple Object Access Protocol)
  - 내가 UDDI에서 해당하는 WSDL를 찾은 다음, 실제로 통신하는 프로토클
- 위의 것들을 이용해서 데이터를 두고받는 것이 Web Service
  - 그러나 얘네가 어려워서 만들게 된 것이 **REST**
    - 요즘에 쓴다! 나중에 자세히 알아보게 된다~
- Hyper Link
  - 누르면 정보를 가져오는 거니까!
- Socket
  - 서버에 포트를 뚫어서 클라이언트가 직접 연결하게 하는것
    - 클라이언트가 직접 그 컴퓨터에 접속할 수 있도록 해주는것!
  - 소켓방식이라고 한다

> 이런 종류가 있다는 걸 알아두자

## 통신 유형

1. 실시간 처리 (우리가 이용하는 대부분의 것들)
   - 단방향
   - 동기
   - 비동기
   - 지연 처리
     - 네트워크 쪽에서 자세히 다룬다!
2. 배치 처리 (한달에 한번씩, 일주일에 한번씩 돌아가는 것)
   - ex. 급여, 전기요금, 통신요금 등
   - 보통 [이름,ID,전화번호..] 중 2개를 접목하면 어떤 한사람을 특정할 수 있기에 하나를 제외한 나머지는 암호화해서 저장하게 된다.
     - 비밀번호는 단방향 암호화
       - 나머지는 양방향으로 암호화-복호화가 가능한 걸 쓴다
   - 법령이 정한 암호화 대상
     - 주민번호, 비밀번호, 패스워드, 계좌번호, 공개에 동의하지 않은 개인정보
   - 데이터 송수신 과정도 물론 암호화!

# 2. 인터페이스 오류 처리

## 인터페이스 오류 처리

### 절차

1. 로그 파일에 로그 기록
2. 로그를 확인하여 오류 확인
3. 유형에 따라 적절한 방안 선택
   - 데이터 오류 → 데이터 보정 재전송
   - 접속 오류 → 접속오류 해결 후 재전송

### 오류 코드

회사마다 정하기 나름

표준화 된 사항 X

오류 코드 - 내용으로 구성되어 있다

# 3. 인터페이스 설계

최종 설계를 끝내면 인터페이스 목록, 인터페이스 정의서가 나온다.

## 인터페이스 설계서 구성

### 1. 인터페이스 목록

- 어떤 시스템들과 인터페이스하고 있는지에 대한 목록들
  - 어떤 인터페이스가 있는지 **파악하기 위함**
- 회사마다 문서들의 형태가 다르다. 표준화 불가!

### 2. 인터페이스 정의서

- 위의 **목록을 상세하게** 만든 것

## 인터페이스 설계 명세화

설계를 했으면 글로 남겨야 한다!

회사마다 다른 작성 양식에 맞춰 작성한다!

목록 작성 → 인터페이스 정의서 작성 → 코드 변환

# 4. 미들웨어 솔루션 ⭐

## 개념

- 양쪽을 연결해서 데이터 주고받을 수 있도록 **중간에서 매개 역할을 하는 소프트웨어. = 미들웨어!**

## 종류 ⭐⭐⭐

1. 원격 프로시저 호출 **RPC** (Remote Procedure Call)
   - 외부에 있는 컴퓨터 자원 이용할 때.
     - 중간에서 프로시저를 호출할 수 있게 도와준다.
     - 프로시저란?
       - 함수, 메서드, 프로시저
2. 메시지 지향 미들웨어 **MOM (**Message Oriented Middleware)
   - 지연 처리
     - 저장하면서 ~ 비동기식 미들웨어
   - X**실시간X으로 처리되지 않아야 하는 것들**
     - 배치에 가깝다
3. **ORB** (Object Request Broker)
   - 객체지향 시스템에서 객체 및 서비스를 요청하고 전송할 수 있도록 지원하는 미들웨어
4. DB 접속 미들웨어
   - JDBC, ODBC
5. TP 모니터 (Transaction Processing monitor)
   - 트랜잭선 = 하나의 일처리 단위
     - 이걸 모니터할 수 있는 것!
       - 올바르게 처리되는지 감시 제어
6. 웹 어플리케이션 서버 **WAS** (Web Application Server)
   - 웹 애플리케이션을 지원하는 미들웨어
     - 웹 서버가 아니다!!
7. 엔터프라이즈 서비스 버스 (Enterprise Service Bus)
   - 선로(버스)를 이용해 주고받게 한다
     - 기업 안팎의 모든 시스템 환경 연동
   - **느슨한 결합 형태!**
     - **= 약결합**
       - 장애 발생하더라도 이용 가능!
         - 강결합은 반대다 - 모든 걸 이용 불가

## 다층구조

ex. MVC 모델 뷰 컨트롤러단이 각각 따로! → 이런식으로 다층으로 나눈 구조!

비즈니스 로직 = 컨트롤러단을 완전히 분리

### 계층별 특징

- 프레젠테이션 계층 = 뷰 단
  - 단순하게 화면만 보는것
  - 프론트엔드라고도 한다
- 어플리케이션 계층 = 컨트롤러단 (실제 처리하는)
  - 정보 가공
  - 미들웨어 or 백엔드
  - 데이터만 처리한다
- 데이터 계층 = 모델 단
  - 데이터베이스
  - 주로 DB서버 (or File System)
