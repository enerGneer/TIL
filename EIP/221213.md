# CHAPTER 03. 애플리케이션 설계

# Section 1. 공통 모듈 설계

> (공통) 모듈 설계

### 모듈이란?

- 하나의 일처리 단위가 되는 것
- ex
  - C의 함수
  - JAVA의 메서드 (함수 같은 역할을 한다)
    - ex. 더하기 기능이라는 하나의 기능만 정확하게 수행하면 된다.

### 모듈 설계란?

하나의 일처리를 정확히 수행할 수 있도록 간결히 작성하는 것

- 공통 모듈이란
  - 어떤 프로젝트에서 공통으로 사용하는 모듈들
    - 여기선 큰 의미는 없으니 모듈 설계에 집중하자!

# 1. 설계 모델링

### 개념

- 소프트웨어 모듈 식별&이것들의 연결을 그림으로 표현한 것
  - 공통된 개념 공유

### 원칙

> 상식선에서 접근하자

- 설계는 구조화되어야 한다
  - 변경이 용이하도록
- 한 함수 안에는 하나의 기능만 정확하게 수행할 수 있도록 하자
- 모듈에는 **독립성 필요**
  - 이 모듈만 가져다가 다른 곳에도 활용할 수 있도록 하는 것

## 절차

요구사항 명세 → [아키텍처 설계 → 시스템 아키텍처 → 데이터베이스 설계-명세] → 서브시스템 설계-명세 → 컴포넌트 설계-명세 → 자료구조/알고리즘 설계

### 아키텍처

- = 구조. 전체 구성도
- 종류
  1. 시스템 아키텍처
     - 컴퓨터는 어떻게 구성되어있는가
  2. 소프트웨어 아키텍처
     - 전체적인 소프트웨어의 구조 (로그인 하는 모듈 등)

### 데이터베이스 설계

- 데이터베이스는 개발 전에 선행되어야 한다.

### 서브시스템

- 큰 덩어리의 시스템
  - (회원쪽, 포인트쪽, 주문쪽)

### 컴포넌트

- 서브시스템 내에서 수행되는 작은 단위

### 자료구조와 알고리즘 설계

- = 실제 개발
- **알고리즘**
  - = 문제를 푸는 방법
  - 정답이 없다

### 협약에 의한 설계 ⭐

클래스에 대한 여러 가정을 공유하도록 명세한다

(멋대로 하지 말고 협약에 따라 설계한다~ 는 의미)

- **선행 조건** : 설계 전에 어떤 일이 있어야 되느냐
- **결과 조건** : 이 설계를 통과했을 때 어떤 결과가 나와야 하느냐
- **불변 조건** : 항상 만족되어야 하는 조건

## 설계의 종류

### 상위 설계(케이스도구)

— 분석과 설계에 관련된 것

### 하위 설계(케이스도구)

— 개발 단계 (구현, 테스트)

- **모듈 설계, 자료구조 설계, 알고리즘 설계**
  - 자료구조 : 컴퓨터 안에 들어가는 데이터를 어떻게 효율적으로 저장할 것인지에 대한 학문. 이 자료구조를 구현하기 위해서는 알고리즘이 들어가야 한다. 뗄레야 뗄 수 없는 관계!

## 설계의 원리 ⭐

### 분할과 정복 (Divide & Conquer)

작게 나눠서 차근차근

### 추상화 (Abstraction)

공통의 성질을 뽑아내는 것 (공통 모듈을 뽑아내는 것)

- **기법** ⭐
  - **과정 추상화**
  - **데이터 추상화**
  - **제어 추상화 (명령)**

### **단계적 분해**

기능을 작은 단위로 나누어 점차적으로 구체화하는 방법

### **모듈화**

실제로 개발할 수 있는 작은 단위로 나눈다

### 정보 은닉

중요한 정보는 감추자

같이 사용되는 것이 **캡슐화**

- 객체지향 하면서 공부하게 된다!
  - 외부에선 접근이 불가능하고 해당 클래스에서만 사용 가능
    - ex. `-`weight / `+`getWeight
      - 누가 언제 사용했는지 log가 남는다

## 유형 2가지

UML의 다이어그램을 떠올리자!

### 1) 구조 모델링

구조

UML 정적 다이어그램에 해당된다

### 2) 행위 모델링

구조가 어떤 상태값으로 바뀔 것인지

UML 행위 (동적) 다이어그램

---

# 2. 소프트웨어 아키텍처

아키텍처 = 전체적인 구조, 구성도

### 개념

- 소프트웨어 시스템의 전체적인 구조

### 특징

- 간략성 : 이해하고 추론할 수 있는
- 추상화 : 시스템의 추상적인 표현을 사용 (공통 속성 사용)
- 가시성 : 포함해야 하는 것들이 보여야 그릴 수 있다
- 관점 모형 : 이해당사자들은 관점이 다 다르다. 각자의 관심사에 따른 모형을 제시해야 한다
- 의사소통수단

### **품질속성** ⭐

> 소프트웨어 뿐만 아니라 모든 곳에서 통용

- 정확성 : 사용자 요구기능을 충족시키는가?
- 신뢰성 : 기능이 오류 없이 동작하는가?
- 효율성 : 기능을 수행하는데 적절한 자원을 소요하는가? (CPU, 메모리 등의 자원을)
- 무결성 : 허용된 사용자만 변경할 수 있어야 한다
- 사용 용이성 : 누구나 쉽게 배우고 사용할 수 있는가
- 유지보수성 : 변경이 잘 되어야 한다
- 시험 용이성 : 테스트가 용이한가
- 유연성 : 뭔가(기능 등) 추가할 수 있는가
- 이식성 : 다양한 플랫폼 및 하드웨어에서 동작하는가
- 재사용성 : 개발된 기능을 다른 목적으로 사용하기 용이한가
  - 재사용성을 위해 모듈의 독립성이 높아야 한다.
    - 모듈의 독립성을 높이기 위해서 응집도를 높이고 결합도는 낮춰야 한다
- 상호 운용성 : 다르 소프트웨어와의 상호 교류 용이

### 소프트웨어 아키텍처 프레임워크 구성 요소

> 이런 것들이 있다

1. 아키텍처 명세서 (구조도)
2. 이해관계자
3. 관심사 Concern
4. 관점 Viewpoint
5. 뷰 View (뷰를 따로 만들어준다)

## 소프트웨어 아키텍처 4+1 뷰 ⭐

> 이해관계자들의 관점이 모두 다르기 때문에 그런 관점뷰들을 만들어둔다.
> → 이것들을 아우를 수 있는 4+1뷰

- 4개의 관점
- View는 다양한 관점을 바탕으로 정의

### **4+1 View Model과 구성요소**

- 논리적 관점
  - 논리 뷰
  - 기획자
  - 기능적 요구사항
- 구현 관점
  - 구현 뷰
  - 개발자 관점
- 프로세스 관점
  - 프로세스 뷰
  - 전체적으로 어떻게 돌아가고 관리되는지
  - PM or 고객
- 배치 관점
  - 배치 뷰
  - 시스템 엔지니어
    - 서버를 구성한다 (하드웨어, 운영체제, 네트워크에 특화된 직군)
      - 개발자는 그들이 만들어놓은 서버 위에 개발해서 올린다.
  - 어떻게 매핑되는가
  - 비기능적 요구사항 고려 (가용성, 신뢰성, 성능, 확장성)

**➕ 위의 4개의 뷰를 하나로 아우를 수 있는▼**

- 유스케이스 관점
  - +1뷰
  - 유스케이스 뷰
  - 사용자 입장
  - 다른 뷰 검증
  - 유즈케이스 다이어그램 사용

## 소프트웨어 아키텍처 패턴 ⭐

> 정확한 특징을 기억해둔다

### 1. 계층화 패턴

= n-티어 아키텍처 패턴

트리 형태로 계층적으로 그리는 것

- 하위층이 있다!
  - OSI 7계층, TCP/IP 4계층

### 2. 클라이언트-서버 패턴

우리가 인터넷을 사용할 때의 패턴

클라이언트&서버 둘 다 입력 처리 가능

### 3. 마스터-슬레이브 패턴

슬레이브에서 자료를 입력 → 마스터에서 처리 → 그 처리된 결과를 다시 슬레이브에게 돌려준다

- 클라이언트-서버와의 결정적인 차이
  - 여기있는 슬레이브는 생각을 못한다. (단순한 단말기 역할) 결과값만 보여주는 것이다.
- ex. 컴퓨터와 주변장치 (연산은 CPU가 함)

### 4. 파이프-필터 패턴

파이프로 연결되어 있어서 한 쪽 방향으로 순차적으로 일처리→넘기고→처리→넘기고

데이터 스트림을 생성 처리

오버헤드는 일처리라고 생각하면 된다!

- **⭐서브시스템이 입력 데이터를 받아 처리하고 결과를 다음 서브시스템으로 넘겨주는 과정을 반복한다**

### 5. 브로커 패턴

브로커 컴포넌트가 컴포넌트간의 통신을 조절한다

클라이언트와 서버 사이에 **브로커**가 있다!

### 6. 피어 투 피어 Peer to Peer 패턴

컴퓨터와 컴퓨터가 연결되어 있는 것

- 피어 = 컴퓨터!

ex. 토렌토 같은 것들 (P2P)

피어 객체 하나가 클라, 서버 역할 모두 수행

### 7. 이벤트-버스 패턴

이벤트 버스를 통해 특정 채널로 메시지를 발행

리스너가 구독한 채널에 소스가 서비스를 제공하면 → 채널이 리스너에게 서비스 제공

- 리스너 : 구독자 역할

ex. 알림 서비스

### 8. 모델-뷰-컨트롤러 패턴

> 가장 많이 사용하는 패턴

1. View : 사용자가 보는 화면 ex. 로그인 화면
2. 사용자가 로그인 정보를 넣으면 정보는 서버로 간다
3. 이 작업은 컨트롤러가 처리한다.
4. 그러나 컨트롤러에는 데이터가 없다
5. 그래서 데이터베이스의 모델 형태로 데이터를 추출한다

- 연관관계
  - 뷰 - 화면
    - 사용자에게 결과를 표시
  - 컨트롤러 -처리
    - 사용자에게 입력받아 연산 처리
  - 모델 - 데이터베이스
    - 도메인 기능&자료 저장 보관

ex. 일반적인 웹 어플리케이션 설계 아키텍처

### 9. 블랙보드 패턴

아직 명확히 알려지지 않은 문제에 대해 유용한 패턴

ex. 음석인식, 단백질 구조 식별

### 10. 인터프리터 패턴

특정 언어로 작성된 프로그램을 해석하는 컴포넌트 설계 시 사용
