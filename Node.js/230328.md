# 노드 JS란?

모든 컴퓨터에 설치할 수 있는 자바스크립트 런타임.

자바스크립트와 노드JS를 사용해서 브라우저 외부에서 파일 시스템 또는 데이터베이스에 접근하는 자바스크립트 코드를 실행할 수 있다.

## 어떤 기능이 지원되는가?

[nodejs.org](http://nodejs.org/)의 공식 문서 참고!

브라우저에서 DOM과 상호 작용할 수 있는 것처럼 노드JS로 코드를 실행할 때 파일 시스템과 상호 작용할 수 있다.

## 패키지

노드JS에는 노드JS 코드에서 사용할 수 있는 다양한 기능을 제공하는 많은 패키지가 포함되어 있다.

예를 들어, 노드JS는 들어오는 요청을 수신하고 응답을 다시 보내기 위해 코드에서 사용할 수 있는 특정 기능을 제공하는 HTTP 패키지와 함께 제공됩니다

이게 바로 우리가 자신만의 웹 서버를 작성하고 싶다면 해야 할 작업입니다

## 웹 서버를 만들려면

들어오는 요청을 처리하는 방법을 알고 응답을 다시 보내는 방법을 알고 있는 일부 자바스크립트 코드를 작성해야 한다.

그러면 브라우저의 도움을 받아 두 번째 단계에서 커스터마이징된 웹 서버에 요청을 보낼 수 있다.

## require

노드JS에 내장된 특수한 키워드

require('') 형식으로 사용하며, 따옴표 안에는 사용하려는 노드JS 패키지 이름을 넣어주면 된다.

### HTTP 패키지

요청과 응답을 처리하는 데 도움이 되는 특정 기능을 제공하는 object

require 하면 노드JS에서 제공하는 유틸리티 메서드와 속성으로 가득 찬 object가 반환된다.

일반적으로 이러한 패키지는 const로 저장한다.

```jsx
const http = require("http");
```

이러면 http.createServer() 처럼 내장된 메서드를 사용 가능해진다. (웹 서버를 생성하는 메서드)

### createServer

필요한 모든 서버 기능이 포함된 객체를 반환한다.

이 역시 const에 저장 가능하며, 내장된 메서드인 listen을 호출할 수 있다

```jsx
const http = require("http");
const server = http.createServer();
server.listion();
```

### 여기서 중요한 건

1. ‘들어오는 요청을 처리하고 응답을 다시 보내는 방법’을 알고 있는 서버를 먼저 생성한다는 것
2. 그 다음 단계에선 포트 번호에서 수신 대기를 시작한다.
3.

## 포트

브라우저는 포트를 내부에 추가한다.

80은 기본값이라서 입력할 필요없이 그냥 {[amazon.com](http://amazon.com/)}만 입력하면 되고, 기본적으로 80, 443 포트로 전송된다. 따라서 [amazon.com:80](http://amazon.com:80) 과 그냥 아마존닷컴의 결과는 동일한 것.

노드JS로 자체 서버를 생성할 때, 들어오는 요청을 수신할 포트를 노드JS에 알려야 한다.

그래서 listen엔 첫 번째 매개변수 값으로 포트 번호를 전달하는 것.

```jsx
const http = require("http");
const server = http.createServer();
server.listion(3000);
```

### 개발 전용으로 사용할 3000포트

3000은 일반적으로 열리지 않는 포트이지만, 개발 중에는 서버를 이리저리 시도해보고 모든 것이 작동하는지 테스트하기 위해 일반적으로 기본이 아닌 포트를 사용해서 로컬 개발 시스템에서 실행 중인 다른 서비스와 충돌하지 않도록 한다.

이 코드가 실행되면 서버를 만들어서 포트 3,000에서 들어오는 요청을 수신하려고 하는 것.

나중에 실제로 배포할 땐 80이나 443으로 교체하게 된다.

여기까지 하면 서버를 만들고 수신 대기 상태가 된다.

## 실제 요청이 도달하면 수행할 작업에 대한 instruction

노드JS와 같은 서버 측 언어를 사용하는 전반적인 이유는 더 많은 제어를 원하고 들어오는 요청에서 일부 데이터를 추출하기를 원하기 때문.

들어오는 요청을 처리하는 함수 이름은 handleRequest가 적당. createServer에 매개변수 값으로 전달한다.

실행하지 않을 것이라 괄호는 치지 않는다.

```jsx
const http = require("http");

function handleRequest
const server = http.createServer(handleRequest);
server.listion(3000);
```

이렇게 들어오는 요청을 받았을 때 `handleRequest` 함수를 실행해야 한다는 걸 노드JS에 알리는 것이다.

그리고 createServer는 request, response 두 매개변수값이 필요 하다.

즉, request가 이 노드JS 서버에 도달할 때마다 노드JS는 이 함수를 실행하고 request에 대한 더 많은 데이터가 포함된 객체와 응답을 다시 보낼 수 있는 **다른 객체를 전달한다.**

이 모든 건 노드JS에 의해 자동으로 실행된다.

그래서 이제 handleRequest 함수에서 이 request로 작업할 수 있다.

예를 들어 이 request에서 데이터를 추출하고 다시 보내야 하는 response를 준비할 수 있다.

### 응답은 반드시 필요

왜냐하면 요청에 대한 응답을 되돌려 보내지 않는 웹 서버를 생성하면 웹 서버가 들어오는 요청에 대한 응답을 다시 보내야 하기 때문에 웹 서버와 소통을 시도할 때 잘못된 웹 서버가 되고 브라우저에 오류가 표시되기 때문.

따라서 여기 `handleRequest` 함수 내부에선 이 response 객체를 사용해서 응답을 준비해서 다시 보낼 수 있다.
